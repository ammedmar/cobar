
\section{Monoidal properties}

\subsection{Monoidal functors}

TBW categorically. Induce functor on Monoids.

\subsection{Day convolution} \label{ss:day convolution}

Define

\subsection{Cubical singular complex}

It is monoidal.


%By definition, the functor of chains $\cchains \colon \cube \to \Ch$ is monoidal, i.e., the diagram
%\begin{equation*}
%\begin{tikzcd}
%2^p \times 2^q \arrow[r, "\cong"] \arrow[d, "\cchains \otimes \cchains"']& 2^{p+q} \arrow[d, "\cchains"] \\
%\cchains(\cube^p) \otimes \cchains(\cube^q) \arrow[r, "\cong"] & \cchains(\cube^{p+q})
%\end{tikzcd}
%\end{equation*}
%commutes and $\cchains(2^0) = R$.

\subsection{Serre coalgebra}

$\cchains$ is monoidal. $\cchainsAS$ is monoidal

%The lift of  $N \colon \cube \to \Ch$ to the symmetric monoidal category $\coAlg$ is also monoidal since the following diagrams associated to the Serre diagonal and augmentation map commute:
%\begin{equation*}
%\begin{tikzcd}
%\cchains(\cube^p) \otimes \cchains(\cube^{q}) \arrow[r, "\cong"] \arrow[d, "(23) \circ (\Delta \otimes \Delta)"'] & \cchains(\cube^{p+q}) \arrow[d, "\Delta"]\\
%\cchains(\cube^p)^{\otimes 2} \otimes \cchains(\cube^{q})^{\otimes 2} \arrow[r, "\cong"]& \cchains(\cube^{p+q})^{\otimes 2}
%\end{tikzcd}
%\qquad \qquad
%\begin{tikzcd}
%\cchains(\cube^p) \otimes \cchains(\cube^{q}) \arrow[r, "\cong"] \arrow[d, "(\varepsilon \otimes \varepsilon)"'] & \cchains(\cube^{p+q}) \arrow[d, "\varepsilon"] \\
%R \otimes R \arrow[r, "\cong"] & R.
%\end{tikzcd}
%\end{equation*}

\subsection{Equivariance of the Serre coproduct}
%We will use the following observation about the Serre diagonal to define the Hopf structure on $\M$.
There is an action of $\S_n$ on $\chains(\cube^n)$ given by permuting the factors of $\chains(\cube^1)^{\otimes n}$.
The Serre diagonal is equivariant with respect to this action in the following sense.

\begin{lemma} \label{l:serre diagonal invariant}
	Let $T$ be the braiding of $\Ch$.
	The following diagram commutes
	\begin{equation*}
	\begin{tikzcd}
	\chains(\cube^1)^{\otimes 2} \arrow[r, "\Delta"] \arrow[d, "T"] &
	\chains(\cube^1)^{\otimes 2} \otimes \chains(\cube^1)^{\otimes 2} \arrow[d, "T \otimes T"] \\
	\chains(\cube^1)^{\otimes 2} \arrow[r, "\Delta"] &
	\chains(\cube^1)^{\otimes 2} \otimes \chains(\cube^1)^{\otimes 2}.
	\end{tikzcd}
	\end{equation*}
\end{lemma}

\begin{proof}
	This can be proven by a straightforward verification. Conceptually, it holds because $(12)(34)(23) = (23)(13)(24)$ in $\S_4$.
\end{proof}

\subsection{Hopf operads and props}

So far we have consider operad and props over the category $\Ch$ but, since $\coAlg$ is also a symmetric monoidal category, we can consider them over $\coAlg$ as well.
That is to say, demand that all defining chain complexes be coalgebras with composition maps being morphisms of coalgebras.
We refer to operads and props over $\coAlg$ as \textit{Hopf operads and props} respectively.

If $\O$ is a Hopf operad, the category $\coAlg_\O$ is monoidal with structure maps of a product of $\O$-coalgebras $C \otimes C^\prime$ given by
\begin{equation*}
\begin{tikzcd} [column sep = normal, row sep=large]
\O(r) \otimes (C \otimes C^\prime) \arrow[r, "\Delta_\O \otimes \id"] &[10 pt] \O(r) \otimes \O(r) \otimes (C \otimes C^\prime) \arrow[d, "Sh"'] & & \\ &
\big(\O(r) \otimes C \big) \otimes \big( \O(r) \otimes C \big) \arrow[r] & 
C^{\otimes r} \otimes C^{\prime\, \otimes r} \arrow[r, "Sh"] &
(C \otimes C^\prime)^{\otimes r}.
\end{tikzcd}
\end{equation*}

A similar statement holds for the category of representations $\biAlg_\P$ of a Hopf prop $\P$.

\subsection{Cubical structure on $\M$}

We will now revisit from \cref{ss:definition of M} the definition of $\M$ and provide this prop with a cubical structure which we will use to make it into a Hopf prop in the next subsection.

We start with a general observation.
As explained in \cref{ss:free construction}, the $(m,n)$-part of the free prop generated by an $\S$-module $N$ is given by
\begin{equation*}
\F(N)(m,n) \ = \bigoplus_{\Gamma \in \G(m,n)} \bigotimes_{v \in Vert(\Gamma)} out(v) \otimes_{\S_q} N(p, q) \otimes_{\S_p} in(v),
\end{equation*}
which is well defined only up to a choice of total order on the set of vertices of the $(m,n)$-graphs involved.

In the case we are concern with, the free prop whose quotient defines $\M$ is generated by an $\S$-bimodule $M$ with
\begin{equation*}
M(1,0) = \k \left\{ \; \counit \ \right\}, \qquad
M(1,2) = \k[\S_2] \left\{ \; \coproduct \ \right\}, \qquad
M(2,1) = \k[\S_2^\op] \left\{ \partial_0\! \product \, \right\} \xleftarrow{1 - T} \k[\S_2^\op] \left\{ \, \product \; \right\},
\end{equation*}
and $M(m,n) = 0$ otherwise.
We notice that the elements $\rightboundary\,$ and $\,\leftboundary\,$ in $\F(M)(2,1)$ are interchanged by the action of $T \in \S_2^\op$.
Let $\widetilde{\M}$ be the quotient of $\F(M)$ by the ideal generated by the identification of $\,\partial_0\! \product$ and $\,\rightboundary\,$, so that the boundary of $\product$ is $\,\boundary\,$.
Consider a basis element of $\widetilde{\M}(m,n)_d$ represented by an immersed $(m,n)$-graph $\Gamma$ with $d$ occurrences of $\product.$
A choice of total order of the vertices of $\Gamma$ defines a chain map
\begin{equation} \label{e:order chain map}
\begin{tikzcd}[row sep=tiny, column sep=small]
\iota_\Gamma \colon \chains(\square^d) \arrow[r] & \widetilde{\M}(m,n) \\
\qquad {[0,1]}^{\otimes d} \arrow[r, |->] & \Gamma,
\end{tikzcd}
\end{equation}
referred to as the \textit{characteristic map of $\Gamma$}.
We obtain characteristic maps on $\M$ simply by composing these with the projection $\widetilde{\M} \to \M$ obtained from the quotient by the prop ideal generated by the relations \eqref{e:relations of M}.

\subsection{Hopf structure on $\M$}

We now use the existence of characteristic maps on $\M$ to show it is a prop over $\coAlg$.
Since, by Lemma~\ref{l:serre diagonal invariant}, the Serre diagonal is equivariant, the following definition is independent of the total order on vertices used to define characteristic maps.

\begin{definition}
	For any biarity $(m,n)$, the \textit{coproduct} $\Delta_\M(m,n) \colon \M(m,n) \to \M(m,n)^{\otimes 2}$ is defined on a basis element $\Gamma$ by $\Delta_{\M}(\Gamma) = \iota_\Gamma^{\otimes 2} \circ \Delta \left( [0,1]^{\otimes d} \right)$, and the \textit{counit} $\epsilon_\M(m,n) \colon \M(m,n) \to \k$ is defined by requiring $\epsilon_M(\Gamma) = 1$ if the degree of $\Gamma$ is $0$.
\end{definition}

\begin{theorem}
	The collections of maps $\Delta_\M = \{\Delta_\M(m,n)\}_{m,n \geq 0}$ and $\varepsilon_\M = \{\varepsilon_\M(m,n)\}_{m,n\geq0}$ make $\M$ into a Hopf prop, i.e., a prop over the category $\coAlg$.
\end{theorem}

\begin{proof}
	The linear map $\Delta_\M$ is compatible with the relations defining $\M$ since
	\begin{center}
		\begin{tikzcd}
		\leftcounitcoproduct \arrow[r, "\Delta_\M"] \arrow[d, <->] &[-0pt] \leftcounitcoproduct \otimes \leftcounitcoproduct \arrow[d, <->] \\
		\identity \arrow[r, "\Delta_\M"] & \ \, \identity \otimes \identity \, ,
		\end{tikzcd}
		\qquad
		\begin{tikzcd}
		\rightcounitcoproduct \arrow[r, "\Delta_\M"] \arrow[d, <->] &[-0pt] \rightcounitcoproduct \otimes \rightcounitcoproduct \arrow[d, <->] \\
		\identity \arrow[r, "\Delta_\M"] & \ \, \identity \otimes \identity \, ,
		\end{tikzcd}
		\qquad
		\begin{tikzcd}
		\leftcomb \arrow[r, "\Delta_\M"] \arrow[d, <->] &[-0pt] \leftcomb \, \otimes \leftcomb \arrow[d, <->] \\
		\rightcomb \arrow[r, "\Delta_\M"] & \, \rightcomb \, \otimes \rightcomb,
		\end{tikzcd}
		\qquad
		\begin{tikzcd}
		\productcounit \arrow[r, "\Delta_\M"] \arrow[d, <->] &[-0pt] \counit\ \counit \, \otimes \productcounit + \productcounit \otimes \, \counit\ \counit \arrow[d, <->] \\
		0 \arrow[r, "\Delta_\M"] & \ 0,
		\end{tikzcd}
	\end{center}
	and it is a chain map since
	\begin{center}
		\begin{tikzcd}
		\counit \arrow[r, "\Delta_\M"] \arrow[d, "\partial"'] &[-0pt] \counit \otimes \counit \arrow[d, "\partial"'] \\
		0 \arrow[r, "\Delta_\M"] & \ \, 0 \, ,
		\end{tikzcd}
		\qquad
		\begin{tikzcd}
		\coproduct \arrow[r, "\Delta_\M"] \arrow[d, "\partial"'] &[-0pt] \coproduct \otimes \coproduct \arrow[d, "\partial"'] \\
		0 \arrow[r, "\Delta_\M"] & \ \, 0 \, ,
		\end{tikzcd}
		\qquad
		\begin{tikzcd}
		\product \arrow[r, "\Delta_\M"] \arrow[d, "\partial"'] &[-0pt] \leftboundary \ \otimes \product + \product \otimes\ \rightboundary \arrow[d, "\partial"'] \\
		\rightboundary \,-\, \leftboundary \arrow[r, "\Delta_\M"] &
		\, \rightboundary \otimes \rightboundary \,-\, \leftboundary \otimes \leftboundary\,.
		\end{tikzcd}
	\end{center}
	Furthermore, $\Delta_\M$ is compatible with the composition structure since given characteristic maps $\iota_\Gamma$ and $\iota_{\Gamma^\prime}$, the chain map $\iota_\Gamma \otimes \iota_{\Gamma^\prime}$ is a characteristic map of any (vertical or horizontal) composition of $\Gamma$ and $\Gamma^\prime$.
	
	One can check similarly that $\varepsilon_\M$ is well defined.
\end{proof}

\subsection{Monoidal $E_\infty$ structures}

We now prove the main technical result of this paper.

\begin{theorem} \label{t:cubical e-infty chains are monoidal}
	The functor $\cchainsUM \colon \cSet \to \coAlg_\UM$ is monoidal.
\end{theorem}

\begin{proof}
	It suffices to prove this result for chains on the standard cubes.
	These are equipped with a natural $\M$-structure, and we will prove the stronger statement that the functor $\mathrm{N}^\cube_\M \colon \cube \to \biAlg_{\M}$ is monoidal.
	
	We have already establish that the Serre diagonal and the augmentation map are compatible with the monoidal structure of $\cube$.
%	In diagrammatic terms,
%	\begin{equation*}
%	\begin{tikzcd}
%	\coproduct \otimes \chains(\cube^{p+q}) \arrow[r, "\Delta_\M \otimes Sh"] \arrow[d] &[20pt]
%	\left( \ \coproduct \otimes \coproduct \ \right) \otimes
%	\chains(\cube^{p}) \otimes \chains(\cube^{q}) \arrow[d] \\
%	\chains(\cube^{p+q})^{\otimes 2} \arrow[r, "Sh"] &
%	\chains(\cube^{p})^{\otimes 2} \otimes \chains(\cube^{q})^{\otimes 2}
%	\end{tikzcd}
%	\end{equation*}
%	and
%	\begin{equation*}
%	\begin{tikzcd}
%	\counit \ \otimes \chains(\cube^{p+q}) \arrow[r, "\Delta_\M \otimes Sh"] \arrow[d] &[20pt]
%	\left( \ \counit \ \otimes \ \counit \ \right) \otimes
%	\chains(\cube^{p}) \otimes \chains(\cube^{q}) \arrow[d] \\
%	R \arrow[r, "\cong"] &
%	R \otimes R
%	\end{tikzcd}
%	\end{equation*}
%	commute.
	We will now show that the following diagram commutes:
	\begin{equation*}
	\begin{tikzcd}
	\product \otimes \chains(\cube^{p+q})^{\otimes 2} \arrow[d] \arrow[r, "\Delta_\M \otimes Sh"] &[20pt]
	\left(\, \ \leftboundary \ \otimes \product + \product \otimes \ \rightboundary \ \, \right) \otimes \chains(\cube^{p})^{\otimes 2} \otimes \chains(\cube^{q})^{\otimes 2} \arrow[d]\\
	\chains(\cube^{p+q}) \arrow[r, "Sh"] &
	\, \chains(\cube^{p}) \otimes \chains(\cube^{q}).
	\end{tikzcd}
	\end{equation*}
	Since this is immediate for $p=0$ or $q=0$ and $\cube$ is generated as a monoidal category by $2^1$, we only need to verify the commutativity of this diagram for $p=q=1$.
	Consider $(x_1 \otimes y_1) \otimes (x_2 \otimes y_2) \in \chains(\cube^1)^{\otimes 2} \otimes \chains(\cube^1)^{\otimes 2}$.
	We have
	\begin{equation*}
	\begin{split}
	\big((\id \otimes \varepsilon) \otimes \ast \ + \ \ast \otimes (\varepsilon \otimes \Delta)\big) \ (-1)^{\bars{y_1} \bars{x_2}} \ (x_1 \otimes x_2) \otimes (y_1 \otimes y_2) \ & = \\
	(-1)^{\bars{y_1} \bars{x_2} + \bars{x_1} + \bars{x_2} + \bars{y_1}} \ x_1 \cdot \varepsilon(x_2) \otimes y_1 \ast y_2 \ & + \ 
	(-1)^{\bars{y_1} \bars{x_2} + \bars{x_1}} \ x_1 \ast x_2 \otimes \varepsilon(y_1) \ast y_2.
	\end{split}
	\end{equation*}
	The first summand on the left hand side is non-zero only if $\bars{x_2} = \bars{y_1} = \bars{y_2} = 0$, whereas the second is non-zero only if $\bars{x_1} = \bars{x_2} = \bars{y_1} = 0$, so the above is also equal to
	\begin{equation} \label{e:join is monoidal 1}
	(-1)^{\bars{x_1}} \ x_1 \cdot \varepsilon(x_2) \otimes y_1 \ast y_2 \ + \ 
	x_1 \ast x_2 \otimes \varepsilon(y_1) \ast y_2.
	\end{equation}
	On the other hand,
	\begin{align*}
	(x_1 \otimes y_1) \ast (x_2 \otimes y_2) \ & =\ 
	(-1)^{\bars{x_1} + \bars{y_1}} \ (x_1 \ast x_2) \otimes \varepsilon(y_1) \cdot y_2 \ +\
	(-1)^{\bars{x_1} + \bars{y_1}} \ x_1 \cdot \varepsilon(x_2) \otimes (y_1 \ast y_2) \\ \ & =\ 
	(x_1 \ast x_2) \otimes \varepsilon(y_1) \cdot y_2 \ +\
	(-1)^{\bars{x_1}} \ x_1 \cdot \varepsilon(x_2) \otimes (y_1 \ast y_2),
	\end{align*}
	which is equal to \eqref{e:join is monoidal 1} as claimed.
\end{proof}
