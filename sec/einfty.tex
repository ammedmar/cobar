% !TEX root = ../cobar1.tex

\section{Monoidal \pdfEinfty-structures}

In this section we recall the model $\UM$ of the $E_\infty$-operad, whose category of coalgebras we show to be monoidal.
We use this structure to construct a monoidal functor $\cchainsUM \colon \cSet \to \coAlg_\UM$ extending the Serre coalgebra structure.
This endows for any pointed topological space both $\cobar \sSchainsA(\fX,x)$ and $\cSchainsA(\loops_x \fX)$ with the structure of a monoidal $E_\infty$-coalgebra which is preserved by Adams' map.

\subsection{\pdfEinfty-operads}

Recall that operads control algebraic structures with either one input and multiple outputs or vice-versa. In this article, we  work with dg operads, i.e. operads in the monoidal category $(\Ch, \otimes, \mathbb{1})$; we refer to \cite{vallette2012operads} for more details.

For example, coalgebras, as defined in \cref{ss:coalgebras}, are controlled by the operad $\As$ generated by two elements in degree $0$
\[
\coproduct\,, \quad \counit\,,
\]
modulo the relations
\[
\leftcounitality\,, \quad \rightcounitality\,, \quad \coassociativity\,.
\]
Let $\sigma \in \sym_2$ be the non-identity transposition.
The operad $\Com$ controlling cocommutative coalgebras is obtained by adding the relation
\[
\cocommutativity
\]
to this presentation.
We are interested in compatibly resolving the (trivial) symmetric group actions on $\Com$ associated to the permutation of factors.
An $E_\infty$-operad is an operad $\cO$ quasi-isomorphic to $\Com$ for which the action of $\sym_r$ on $\cO(r)$ is free for each $r \in \N$.
An $E_\infty$-coalgebra structure on a chain complex $C$ is an operad morphism
\[
\cO \to \coEnd(C) = \set{\Hom(C, C^{\ot r})}_{r \in \N}.
\]

\subsection{A finitely presented \pdfEinfty-prop}

A prop is an object controlling algebraic structures with multiple inputs and outputs.
We refer to \cite{markl2008props} for a detailed exposition.
We recall the following construction from \cite{medina2020prop1}.
The prop $\cM$ is generated by adding to the presentation of $\As$ a generator and a relation.
More specifically, a generator in degree $1$ with boundary
\[
\product \ \raisebox{3pt}{$\xmapsto{\bd}$} \ \boundary\,,
\]
and the relation
\[
\qquad \productcounit\,.
\]
The importance of this construction is that the operad $\UM = \set{\cM(1,r)}_{r\in\N}$ obtained by restriction of structure is an $E_\infty$-operad.

\subsection{\pdfM-bialgebras}

%This section is an elaboration on the presentation given in \cite{medina2020prop1}, where proofs to the statement made here can be found.

An $\cM$-bialgebra structure on $C$ is a prop morphism
\[
\cM \to \biEnd(C) = \set{\Hom(C^{\ot s}, C^{\ot r})}_{r,s\in\N}.
\]
More explicitly, is a coalgebra $(C, \Delta, \aug)$ together with a degree~1 product satisfying for any $a,b \in C$ that:
\begin{align}
	\label{eq:M-bialg def 1}
	\aug(a \ast b) =\ & 0, \\
	\label{eq:M-bialg def 2}
	\bd (a \ast b) =\ & \bd a \ast b - (-1)^{a} a \ast \bd b + \aug(a) b - (-1)^{a} a \aug(b).
\end{align}
The signs appearing in Identity \eqref{eq:M-bialg def 2} are a result of the Koszul sign convention.
%, as explained by the following equivalent identities:
%	\begin{align*}
%		(\bd \ast)(x \ot y) =\ & (\aug \ot\, \id - \id \ot \aug)(x \ot y), \\
%		\big(\bd \circ \ast + \ast \circ (\bd \ot\, \id + \id \ot \bd)\big)(x \ot y) =\ & \aug(x) \ot\, y - x \ot \aug(y), \\
%		(-1)^x \bd (x \ast y) + (-1)^{x-1} \bd x \ast y + x \ot \bd y =\ & \aug(x) \ot\, y - x \ot \aug(y),
%		\\
%		\bd (x \ast y) =\ & \bd x \ast y + (-1)^{x+1} x \ast \bd y + \aug(x) y + (-1)^{x+1} x \aug(y).
%	\end{align*}

Any $\cM$-bialgebra structure induces an $E_\infty$-coalgebra structure.
More explicitly, let $(C, \Delta, \aug, \ast)$ be an $\cM$-bialgebra.
The collection of all maps $\set{C \to C^{\ot r}}_{r \in \N}$ generated by $\Delta$, $\aug$ and $\ast$ makes $C$ into an $E_\infty$-coalgebra, specifically into an $\UM$-coalgebra.

\subsection{\pdfEinfty-structure on simplicial chains}

We recall the construction of an $E_\infty$-extension of the Alexander--Whitney coalgebra structure on simplicial chains introduced in \cite{medina2020prop1}.
Let us start by considering the representable simplicial sets.
The coalgebra $\chains(\simplex^n)$ can be made into a natural $\cM$-bialgebra considering an algebraic version of the \textit{join product} defined by
\begin{equation*}
	\left[v_0, \dots, v_p \right] \ast \left[v_{p+1}, \dots, v_q\right] =
	\begin{cases}
		(-1)^{p} \sign(\pi) \left[v_{\pi(0)}, \dots, v_{\pi(q)}\right] &
		\text{ if } v_i \neq v_j \text{ for } i \neq j, \\
		\hfil 0 & \text{ if not},
	\end{cases}
\end{equation*}
where $\pi$ is the permutation that orders the vertices.
A Kan extension of the induced $\UM$-coalgebra structure on $\chains(\simplex^n)$ defines a lift $\schainsUM$ of the Alexander--Whitney coalgebra to the category of $E_\infty$-coalgebras defined by $\UM$.
That is to say, these functors fit in a commutative diagram
\begin{equation*}
	\begin{tikzcd}[column sep=normal, row sep=small]
		& \coAlg_{\UM} \arrow[d] \\
		\sSet \arrow[r]
		\arrow[ur,out=60, in=180, "\schainsUM"]
		\arrow[r, "\schainsA"]
		& \coAlg,
	\end{tikzcd}
\end{equation*}
where the vertical arrow is the obvious forgetful functor.
We remark that this $E_\infty$-structure generalizes those previously introduced in \cite{mcclure2003multivariable,berger2004combinatorial}.

\subsection{\pdfEinfty-structure on cubical chains}\label{ss:cubical e-infty}

We recall the construction of an $E_\infty$-extension of the Serre coalgebra structure on cubical chains introduced in \cite{medina2022cube_einfty}.
Let us first consider representable cubical sets.
The coalgebra structure on $\chains(\cube^n)$ can be made into a natural $\cM$-bialgebra considering a product defined using the following notation.
For a basis element $x = x_1 \ot \dotsb \ot x_n$ of $\chains(\cube^n)$ and an integer $\ell \in \set{1,\dots,n}$ we write
\begin{align*}
	x_{<\ell} & = x_1 \ot \dotsb \ot x_{\ell-1}, \\
	x_{>\ell} & = x_{\ell+1} \ot \dotsb \ot x_n,
\end{align*}
with the convention $x_{<1} = x_{>n} = 1 \in \Z$.
Then, for two such basis elements $x$ and $y$ we set
\begin{equation}\label{eq:product on cubes}
	(x_1 \ot \dotsb \ot x_n) \ast (y_1 \ot \dotsb \ot y_n) =
	\sum_{i=1}^n x_{<i}\, \epsilon(y_{<i}) \ot x_i \ast y_i \ot \epsilon(x_{>i}) \, y_{>i},
\end{equation}
where the only non-zero values of $x_i \ast y_i$ are
\[
[0] \ast [1] = [0, 1], \qquad [1] \ast [0] = -[0, 1].
\]
%\begin{proof}
%	Just to be sure
%	\begin{align*}
%		\bd (x \ast y) &=
%		\bd (\sum_{i=1}^n x_{<i}\, \epsilon(y_{<i}) \ot x_i \ast y_i \ot \epsilon(x_{>i}) \, y_{>i}) \\ &=
%		\sum_{i=1}^n \bd x_{<i}\, \epsilon(y_{<i}) \ot x_i \ast y_i \ot \epsilon(x_{>i} \, y_{>i}) \\ &+		\sum_{i=1}^n (-1)^{x_{<i}} x_{<i}\, \epsilon(y_{<i}) \ot \bd (x_i \ast y_i) \ot \epsilon(x_{>i}) \, y_{>i} \\ &+
%		\sum_{i=1}^n (-1)^{x+1} x_{<i}\, \epsilon(y_{<i}) \ot x_i \ast y_i \ot \epsilon(x_{>i}) \, \bd y_{>i}
%	\end{align*}
%	\begin{align*}
%		\bd x \ast y &=
%		\sum_{i=1}^n \bd x_{<i} \, \epsilon(y_{<i}) \ot x_i \ast y_i \ot \epsilon(x_{>i}) \, y_{>i} \\ &+
%		\sum_{i=1}^n (-1)^{x_{<i}} x_{<i} \, \epsilon(y_{<i}) \ot \bd x_i \ast y_i \ot \epsilon(x_{>i}) \, y_{>i}.
%	\end{align*}
%	\begin{align*}
%		x \ast \bd y &=
%		\sum_{i=1}^n x_{<i} \, \epsilon(y_{<i}) \ot x_i \ast y_i \ot \epsilon(x_{>i}) \, \bd y_{>i} \\ &+
%		\sum_{i=1}^n x_{<i} \, \epsilon(y_{<i}) \ot x_i \ast \bd y_i \ot \epsilon(x_{>i}) \, y_{>i}.
%	\end{align*}
%	Therefore, $\bd(x \ast y) - \bd x \ast y + (-1)^x x \ast y$ is equal to
%	\begin{align*}&
%		\sum_{i=1}^n (-1)^{x_{<i}} x_{<i}\, \epsilon(y_{<i}) \ot \big(\bd (x_i \ast y_i) - \bd x_i \ast y_i + (-1)^{x-i} x_i \ast y_i\big) \ot \epsilon(x_{>i}) \, y_{>i} \\ &=
%		\sum_{i=1}^n (-1)^{x_{<i}} x_{<i}\, \epsilon(y_{<i}) \ot \aug(x_i) y_i - (-1)^{x_i} x_i \aug(y_i) \ot \epsilon(x_{>i}) \, y_{>i} \\ &=
%		\sum_{i=1}^n (-1)^{x_{<i}} x_{<i}\, \epsilon(y_{<i}) \ot \aug(x_i) y_i \ot \epsilon(x_{>i}) \, y_{>i} \\ &-
%		\sum_{i=1}^n (-1)^{x_{<i+1}} x_{<i}\, \epsilon(y_{<i}) \ot x_i \aug(y_i) \ot \epsilon(x_{>i}) \, y_{>i}
%	\end{align*}
%	And a telescopic sum finishes the proof.
%\end{proof}
A Kan extension of the induced $\UM$-coalgebra structure on $\chains(\cube^n)$ defines a lift $\cchainsUM$ of the Serre coalgebra structure to the category of $E_\infty$-coalgebras defined by $\UM$.
That is, a commutative diagram
\begin{equation}\label{eq:lift to e-infty cubical}
	\begin{tikzcd}[column sep=normal, row sep=small]
		& \coAlg_{\UM} \arrow[d] \\
		\cSet \arrow[r]
		\arrow[ur,out=60, in=180, "\cchainsUM"]
		\arrow[r, "\cchainsA"]
		& \coAlg.
	\end{tikzcd}
\end{equation}

\begin{remark*}
	The product defined above in \cref{eq:product on cubes} differs from the one defined in \cite{medina2022cube_einfty} by the sign $(-1)^x$.
	The convention used here is more natural as we will see in \cref{ss:cube_einfty revisited}.
\end{remark*}

\subsection{Monoidal structure}\label{ss:monoidal structures}

In this subsection we describe an extension of the tensor product of coalgebras to $\cM$-bialgebras and $\UM$-coalgebras.

\begin{lemma}\label{l:monoidal M-bialg}
	Let $C$ and $C'$ be $\M$-bialgebras.
	The coalgebra $C \ot C'$ is a natural $\M$-bialgebra with
	\begin{equation}\label{eq:monoidal_product}
		(a \ot b) \ast (c \ot d) =
		a \aug(c) \ot (b \ast d) + (a \ast c) \ot \aug(b) d,
	\end{equation}
	for any $a,c \in C$ and $b,d \in C'$.
\end{lemma}

\begin{proof}
	We verify Identity \eqref{eq:M-bialg def 1} using that $\aug(b \ast d) = \aug(a \ast c) = 0$,
	\begin{align*}
		\aug\big((a \ot b) \ast (c \ot d)\big) =&
		\aug\big(a \aug(c) \ot (b \ast d)\big) + \aug\big((a \ast c) \ot \aug(b) d\big) \\ =&
		\aug(a) \aug(c) \ot \aug(b \ast d) + \aug(a \ast c) \ot \aug(b) \aug(d) \\ =& \ 0.
	\end{align*}
	To verify Identity \eqref{eq:M-bialg def 2} we need to show that
	\begin{equation}\label{eq:monoidal appendix}
		\begin{split}
			\bd \big((a \ot b) \ast (c \ot d)\big) =\, &
			\bd (a \ot b) \ast (c \ot d) - (-1)^{a+b} (a \ot b) \ast \bd (c \ot d) \\ +\, &
			\aug(a \ot b) (c \ot b) - (-1)^{a+b} (a \ot b) \aug(c \ot d).
		\end{split}
	\end{equation}
	Let us start computing the left hand side of the above expression.
	\begin{align*}
		\bd\big((a \ot b) \ast (c \ot d)\big) =\ &
		\bd\big(a \aug(c) \ot (b \ast d) + (a \ast c) \ot \aug(b) d\big) \\ =\ &
		\bd a \aug(c) \ot (b \ast d) \,+\, (-1)^{a} a \aug(c) \ot \bd(b \ast d) \\ +\ &
		\bd (a \ast c) \ot \aug(b) d \,+\, (-1)^{a+c+1} (a \ast c) \ot \aug(b) \bd d.
	\end{align*}
	Using that $C$ and $C'$ satisfy Identity \eqref{eq:M-bialg def 2} we have that
	\begin{align*}
		\bd\big((a \ot b) \ast (c \ot d)\big) =\ &
		\bd a \aug(c) \ot (b \ast d) \\ +\ &
		(-1)^a a \aug(c) \ot \big(\bd b \ast d + (-1)^{b+1} b \ast \bd d + \aug(b) d + (-1)^{b+1} b \aug(d)\big) \\ +\ &
		\big(\bd a \ast c + (-1)^{a+1} a \ast \bd c + \aug(a) c + (-1)^{a+1} a \aug(c)\big) \ot \aug(b) d \\ +\ &
		(-1)^{a+c+1} (a \ast c) \ot \aug(b) \bd d.
	\end{align*}
	Inspecting this expression we label terms which sum to $\bd\big((a \ot b) \ast (c \ot d)\big)$:\vspace*{-10pt}
	\begin{minipage}[t]{0.5\textwidth}
		\begin{align}& \label{x4}
			(-1)^0 \bd a \aug(c) \ot (b \ast d) \\& \label{x5}
			(-1)^{a} a \aug(c) \ot (\bd b \ast d) \\& \label{x6}
			(-1)^{a+b+1} a \aug(c) \ot (b \ast \bd d) \\& \label{x7}
			(-1)^a a \aug(c) \ot \aug(b) d \\& \label{x8}
			(-1)^{a+b+1} a \aug(c) \ot b \aug(d)
		\end{align}
	\end{minipage}
	\begin{minipage}[t]{0.5\textwidth}
		\begin{align}& \label{x9}
			(-1)^0 (\bd a \ast c) \ot \aug(b) d \\& \label{x10}
			(-1)^{a+1} (a \ast \bd c) \ot \aug(b) d \\& \label{x11}
			(-1)^0 \aug(a) c \ot \aug(b) d \\& \label{x12}
			(-1)^{a+1} a \aug(c) \ot \aug(b) d \\& \label{x13}
			(-1)^{a+c+1} (a \ast c) \ot \aug(b) \bd d \quad ||
		\end{align}
		\vskip\parskip
	\end{minipage}
	Additionally, since
	\begin{equation*}
		\bd (a \ot b) \ast (c \ot d) \,=\,
		(\bd a \ot b) \ast (c \ot d) \,+\,
		(-1)^a (a \ot \bd b) \ast (c \ot d),
	\end{equation*}
	the following labeled terms sum to $\bd (a \ot b) \ast (c \ot d)$:
	\begin{align}& \label{x14}
		(-1)^0 \bd a \aug(c) \ot (b \ast d) \\& \label{x15}
		(-1)^0 (\bd a \ast c) \ot \aug(b) d \\& \label{x16}
		(-1)^{a} a \aug(c) \ot (\bd b \ast d) \quad ||
	\end{align}
	Similarly, since
	\begin{equation*}
		(a \ot b) \ast \bd (c \ot d) \,=\,
		(a \ot b) \ast (\bd c \ot d) \,+\,
		(-1)^{c} (a \ot b) \ast (c \ot \bd d),
	\end{equation*}
	the following labeled terms sum to $(-1)^{a+b+1}(a \ot b) \ast \bd (c \ot d)$:
	\begin{align}& \label{x17}
		(-1)^{a+1} (a \ast \bd c) \ot \aug(b) d \\& \label{x18}
		(-1)^{a+b+1} a \aug(c) \ot (b \ast \bd d) \\& \label{x19}
		(-1)^{a+c+1} (a \ast c) \ot \aug(b) \bd d \quad ||
	\end{align}
	We have the following matching pairs of labeled summands.
	\begin{center}
		\eqref{x4}-\eqref{x14} :
		\eqref{x5}-\eqref{x16} :
		\eqref{x6}-\eqref{x18} :
		\eqref{x7}-\eqref{x12} :
		\eqref{x9}-\eqref{x15} :
		\eqref{x10}-\eqref{x17} :
		\eqref{x13}-\eqref{x19}.
	\end{center}
	Additionally, the sum of the unmatched terms \eqref{x11} and \eqref{x8} correspond to
	\[
	\aug(a \ot b) (c \ot b) - (-1)^{a+b} (a \ot b) \aug(c \ot d),
	\]
	which concludes the verification of both Identity \eqref{eq:monoidal appendix} and the lemma.
\end{proof}

We now give a more conceptual description of the monoidal structure on $\biAlg_\M$, which generalizes to $\coAlg_\UM$.
The prop $\cM$ is obtained by applying the functor of cellular chains to a CW prop \cite{medina2021prop2}.
These cells are in fact cubical, generated through compositions by the generators
\[
\stackrel{\cellcoproduct}{\ \gcube^0,} \qquad\qquad
\stackrel{\cellcounit}{\ \gcube^0,} \qquad\qquad
\stackrel{\cellcoboundary}{\ \gcube^1.}
\]
The Serre diagonal defines a diagonal $\Delta_\cM$ on $\cM$ compatible with its prop structure.
More specifically, for any basis element $\mu$ in $\M$ we have a chain map $\phi_\mu \colon \chains(\cube^n) \to \cM$ with $\phi_\mu(2^n) = \mu$, and $\Delta_\cM(\mu)$ is set to be $\phi_D^{\ot 2} \circ \Delta (2^n)$.
%\[
%\begin{tikzcd}[column sep=normal]
%	\chains(\cube^n) \arrow[r,"\phi_D"] \arrow[d, "\Delta"] & \arrow[d, "\Delta_\cM"] \cM \\
%	\chains(\cube^n)^{\ot 2} \arrow[r,"\phi_D^{\ot 2}"] & \cM^{\ot 2}.
%\end{tikzcd}
%\]
%\raisebox{3pt}{$\xmapsto{\Delta_\cM}$}
Crucially, $\Delta_\cM$ acts on the generators by
\begin{align*}
	\coproduct \quad &\mapsto \quad \coproduct \ \raisebox{3pt}{$\ot$} \; \coproduct \,, \\
	\counit \ \quad &\mapsto \ \quad \counit \ \raisebox{3pt}{$\ot$} \; \counit \,, \\
	\product \quad &\mapsto \, \quad \rightboundary \ \raisebox{3pt}{$\ot$} \product \ \raisebox{3pt}{$+$} \ \product \raisebox{3pt}{$\ot$} \ \leftboundary \,,
\end{align*}
which recovers the statement of \cref{l:monoidal M-bialg}.
The structure preserving diagonal on the prop $\cM$ induces one on the operad $\UM$ and defines, as usual for so-called Hopf operads, a monoidal structure on $\coAlg_\UM$.

\subsection{Revisiting the \pdfEinfty-coalgebra structure on cubical chains}\label{ss:cube_einfty revisited}

In this subsection we use the monoidal structure on $\UM$-coalgebras to recover the $E_\infty$-structure on cubical chains (\cref{ss:cubical e-infty}).

\begin{theorem}\label{t:cubical e-infty chains are monoidal}
	$\cchainsUM \colon \cSet \to \coAlg_\UM$ is the monoidal functor determined by the $\M$-bialgebra structure on $\chains(\cube^1)$.
\end{theorem}

\begin{proof}
	It suffices to show that for each $n \in \N$ the two $\M$-bialgebra structures on $\chains(\cube^n) = \chains(\cube^1)^{\ot n}$ agree.
	Since the coalgebra part agrees by definition we focus on the product.
	We will proceed by induction with the base case holding trivially.
	Let $x = x_1 \ot \dotsb \ot x_n$ and $y = y_1 \ot \dotsb \ot y_n$ be two elements in $\chains(\cube^n)$.
	The following straightforward computation verifies that $x \ast y$ in $\chains(\cube^n)$ corresponds to $(x_{<n} \ot x_n) \ast (y_{<n} \ot y_n)$ in $\chains(\cube^{n-1}) \ot \chains(\cube^1)$:
	\begin{align*}
		x \ast y &=
		\sum_{i=1}^n x_{<i}\, \epsilon(y_{<i}) \ot x_i \ast y_i \ot \epsilon(x_{>i}) \, y_{>i} \\ &=
		\sum_{i=1}^{n-1} x_{<i}\, \epsilon(y_{<i}) \ot x_i \ast y_i \ot \epsilon(x_{>i}) \, y_{>i} \ +\
		x_{<n}\, \epsilon(y_{<n}) \ot x_n \ast y_n \\ &=
		x_{<n} \ast y_{<n} \ot \aug(x_n)\, y_n \ +\ x_{<n}\, \epsilon(y_{<n}) \ot x_n \ast y_n \\ &=
		(x_{<n} \ot x_n) \ast (y_{<n} \ot y_n),
	\end{align*}
	which concludes the proof.
\end{proof}

\subsection{A monoidal \pdfEinfty-coalgebra structure on the cobar construction}\label{ss:e-infty on cobar}

Using \cref{t:cubical e-infty chains are monoidal} and the natural equivalence of functors $\cchains \ccobar \cong \cobar \schainsA$ proven in \cref{t:ccobar and cobar}, we can transfer a monoidal $E_\infty$-structure to the Adams' cobar construction of any reduced simplicial set, extending the monoidal coalgebra structure defined by Baues.
This is summarized by the following diagram commuting up to isomorphisms:
\[
\begin{tikzcd}
	& \Mon_{\coAlg_\UM} \arrow[d] \\
	\Mon_{\cSet} \arrow[ru, "\cchainsUM", out=70, in=180] \arrow[r, "\cchainsA"]
	& \Mon_{\coAlg} \arrow[d] \\
	\sSet^0 \arrow[r, "\cobar \schainsA"] \arrow[u, "\ccobar"]
	& \Mon_{\Ch}.
\end{tikzcd}
\]
Furthermore, using the factorization of Adams' map described in \cref{ss:factorization of adams} and the naturality of our monoidal $E_\infty$-structure, we conclude that for any pointed topological space $\fX$,
\[
\theta_\fX \colon \cobar \sSchainsA(\fX,x) \to \cSchainsUM(\loops_x \fX)
\]
is a monoidal quasi-isomorphism of $E_{\infty}$-coalgebras, as announced in the introduction.
