\section{Combinatorial $\M$-bialgebras}

\subsection{Simplicial sets}

We review from \cite{Medina20prop1} a natural $\mathcal M$-bialgebra structure on the normalized chains of standard simplices $N_\bullet(\triangle^n)$.
The $\M$-bialgebra is specified by three linear maps, the images of the generators
\begin{equation*}
\counit, \quad \coproduct, \quad \product,
\end{equation*}
satisfying the relations in the presentation of $\mathcal M$. For $n \in \mathbb{N}$, define: \vspace*{5pt} \\
(1) The counit $\epsilon \in \Hom(N_\bullet(\triangle^n), \Z)$ by
\begin{equation*}
\epsilon \big( [v_0, \dots, v_q] \big) = \begin{cases} 1 & \text{ if } q = 0, \\ 0 & \text{ if } q>0. \end{cases}
\end{equation*}
(2) The coproduct $\Delta \in \Hom(N_\bullet(\triangle^n), N_\bullet(\triangle^n)^{\otimes2})$ by
\begin{equation*}
\Delta \big( [v_0, \dots, v_q] \big) = \sum_{i=0}^q [v_0, \dots, v_i] \otimes [v_i, \dots, v_q].
\end{equation*}
(3) The product $\ast \in \Hom(N_\bullet(\triangle^n)^{\otimes 2}, N_\bullet(\triangle^n))$ by
\begin{equation*}
\left[v_0, \dots, v_p \right] \ast \left[v_{p+1}, \dots, v_q\right] = \begin{cases} (-1)^{p+|\pi|} \left[v_{\pi(0)}, \dots, v_{\pi(q)}\right] & \text{ if } v_i \neq v_j \text{ for } i \neq j, \\
0 & \text{ if not}, \end{cases}
\end{equation*}
where $\pi$ is the permutation that orders the totally ordered set of vertices, and $(-1)^{|\pi|}$ its sign.

\begin{theorem}[\cite{Medina20prop1}] \label{t:simplicial chain bialgebra}
	For every $n \in \mathbb{N}$, the assignment
	\begin{equation*}
	\counit \mapsto \epsilon, \quad \coproduct \mapsto \Delta, \quad \product \mapsto \ast,
	\end{equation*}
	defines a natural $\mathcal M$-bialgebra structure  on $N_\bullet(\triangle^n)$.
\end{theorem}

\begin{proof}
	See Theorem 4.2 in \cite{Medina20prop1}.
\end{proof}

The associated $U(\M)$-coalgebra structures define a natural $U(\M)$-coalgebra structure on the normalized chains of any simplicial set via a Kan extension argument.

\footnote{We remark that there is no $\M$-bialgebra structure on an arbitrary simplicial set. For example, consider the simplicial set whose normalized chains are generated by two degree 0-elements.}


\begin{remark}
	The $E_\infty$-structure we described in Theorem \ref{thm: simplicial chain bialgebra}, depending solely on three fundamental maps, recovers the coalgebra structures of McClure-Smith \cite{mcclure03cochain} and, up to signs, that of Berger-Fresse \cite{berger04combinatorial}.
\end{remark}

\subsection{Chains of cubical sets}

In this subsection we introduce a natural $U(\M)$-coalgebra structure on the normalized chains of any cubical set with connections.
It follows the previous subsection closely.
By the same considerations, the desired construction will follow from a natural $\mathcal M$-bialgebra structure on $N_\bullet(\square^n)$.
These are determined by three linear maps satisfying the relations in the presentation of $\mathcal M$.
For $n \in \mathbb{N}$, define: \vspace*{5pt} \\
(1) The counit $\epsilon \in \Hom(N_\bullet(\square^n), \Z)$ by
\begin{equation*}
\epsilon \left( x_1 \otimes \cdots \otimes x_d \right) = \epsilon(x_1) \cdots \, \epsilon(x_n),
\end{equation*}
where
\begin{equation*}
\epsilon([0]) = \epsilon([1]) = 1, \qquad \epsilon([0, 1]) = 0.
\end{equation*} \vspace*{-6pt} \\
(2) The coproduct $\Delta \in \Hom \left( N_\bullet(\square^n), N_\bullet(\square^n)^{\otimes 2} \right)$ by
\begin{equation*}	
\Delta (x_1 \otimes \cdots \otimes x_n) = 	
\sum \pm \left( x_1^{(1)} \otimes \cdots \otimes x_n^{(1)} \right) \otimes 	
\left( x_1^{(2)} \otimes \cdots \otimes x_n^{(2)} \right),	
\end{equation*}	
where the sign is determined using the Koszul convention, and we are using Sweedler's notation
\begin{equation*}	
\Delta(x_i) = \sum x_i^{(1)} \otimes x_i^{(2)}
\end{equation*}
for the chain map $\Delta \colon N_\bullet(\square^1) \to N_\bullet(\square^1)^{\otimes 2}$ defined by
\begin{equation*}
\Delta([0]) = [0] \otimes [0], \quad \Delta([1]) = [1] \otimes [1], \quad \Delta([0, 1]) = [0] \otimes [0, 1] + [0, 1] \otimes [1].
\end{equation*}
Using that $N_\bullet(\square^n) = N_\bullet(\square^1)^{\otimes n}$, $\Delta$ is the composition
\begin{equation*}
\begin{tikzcd}
N_\bullet(\square^1)^{\otimes n} \arrow[r, "\Delta^{\otimes n}"] & \left( N_\bullet(\square^1)^{\otimes 2}  \right)^{\otimes n} \arrow[r, "sh"] & \left( N_\bullet(\square^1)^{\otimes n} \right)^{\otimes 2}
\end{tikzcd}
\end{equation*}
where $sh$ is the shuffle map that places tensor factors in odd position first. \vspace*{5pt} \\
(3) The product $\ast \in \Hom(N_\bullet(\square^n)^{\otimes 2}, N_\bullet(\square^n))$ by
\begin{align*}
(x_1 \otimes \cdots \otimes x_n) \ast (y_1 \otimes \cdots \otimes y_n) =
(-1)^{|x|} \sum_{i=1}^n x_{<i} \epsilon(y_{<i}) \otimes x_i \ast y_i \otimes \epsilon(x_{>i})y_{>i},
\end{align*}
where
\begin{align*}
x_{<i} & = x_1 \otimes \cdots \otimes x_{i-1}, &
y_{<i} & = y_1 \otimes \cdots \otimes y_{i-1}, \\
x_{>i} & = x_{i+1} \otimes \cdots \otimes x_n, & 
y_{>i} & = y_{i+1} \otimes \cdots \otimes y_n,
\end{align*}
with the convention
\begin{equation*}
x_{<1} = y_{<1} = x_{>n} = y_{>n} = 1 \in \Z,
\end{equation*}
and the only non-zero values of $x_i \ast y_i$ are
\begin{equation*}
\ast([0] \otimes [1]) = [0, 1], \qquad  \ast([1] \otimes [0]) = -[0, 1].
\end{equation*}

\begin{theorem}[\cite{bibid}] \label{thm: cubical chain bialgebra}
	For every $n \in \mathbb{N}$, the assignment
	\begin{equation*}
	\counit \mapsto \epsilon, \quad \coproduct \mapsto \Delta, \quad \product \mapsto \ast,
	\end{equation*}
	defines a natural $\mathcal M$-bialgebra structure on $N_\bullet(\square^n)$.
\end{theorem}

\begin{proof}
	We present a proof of this statement in \cite{??}.
\end{proof}


\section{Hopf structures}

We now make $\M$ into a Hopf prop, i.e., we construct a chain map $\M(m,n) \to \M(m,n) \otimes \M(m,n)$ for every biarity $(m,n)$ compatible with the prop structure of $\M$.

As can be seen from \eqref{e:free prop}, the $(m,n)$-part of the free prop is defined only up to a choice of total order on the set of vertices of the $(m,n)$-graph involved.
Let $\Gamma \in \G(m,n)$ be a representative of an element in $\M(m,n)$ of degree $d$ and let us choose an order of its vertices.
This order defines a chain map
\begin{equation*}
\begin{tikzcd}[row sep=tiny, column sep=small]
\iota_\Gamma \colon \chains(\square^1)^{\otimes d} \arrow[r] & \M(m,n) \\
\qquad {[0,1]}^{\otimes d} \arrow[r, |->] & \Gamma,
\end{tikzcd}
\end{equation*}
and we define the value of diagonal of $\M$ on $\Gamma$ using the Serre diagonal
\begin{equation} \label{e:diagonal of M}
\Delta(\Gamma) = \iota_\Gamma^{\otimes 2} \circ \Delta \left([0,1]^{\otimes d}\right).
\end{equation}
This definition is independent of the choice of total order on $Vert(\Gamma)$ by Proposition~\ref{p:serre diagonal invariant}, and it is compatible with the relations, for example
\begin{center}
	%	\begin{tikzcd}
	%	\leftcounitcoproduct \arrow[r, "\Delta"] \arrow[d, <->] &[-5pt] \leftcounitcoproduct \otimes \leftcounitcoproduct \arrow[d, <->] \\
	%	\identity \arrow[r, "\Delta"] & \identity \otimes \identity \, ,
	%	\end{tikzcd}
	%	\qquad
	%	\begin{tikzcd}
	%	\rightcounitcoproduct \arrow[r, "\Delta"] \arrow[d, <->] &[-5pt] \rightcounitcoproduct \otimes \rightcounitcoproduct \arrow[d, <->] \\
	%	\identity \arrow[r, "\Delta"] & \identity \otimes \identity \, ,
	%	\end{tikzcd}
	%	\qquad
	\begin{tikzcd}
	\productcounit \arrow[r, "\Delta"] \arrow[d, <->] &[-5pt] \counit \, \otimes \productcounit + \productcounit \otimes \, \counit \arrow[d, <->] \\
	0 \arrow[r, "\Delta"] & \, 0,
	\end{tikzcd}
\end{center}
with the others verified similarly.
